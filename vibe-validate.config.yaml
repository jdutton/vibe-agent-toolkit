# vibe-validate configuration
# Documentation: https://github.com/jdutton/vibe-validate

# CI matrix configuration
ci:
  nodeVersions: ['24']
  os: ['ubuntu-latest', 'windows-latest']
  failFast: false

# Hooks configuration
hooks:
  preCommit:
    secretScanning:
      enabled: true

validation:
  phases:
    - name: 'Fast Checks & Build'
      parallel: false
      steps:
        - name: 'Build packages'
          command: 'bun run build'

        - name: 'TypeScript type checking'
          command: 'bun run typecheck'

        - name: 'ESLint'
          command: 'bun run lint'

        - name: 'Dependency check'
          command: 'bun run dependency-check'
          description: 'Validates dependencies are correctly declared (unused, missing, misplaced)'

        - name: 'Repository structure validation'
          command: 'bun run validate-structure'
          description: 'Validates repo structure conventions (no runtime /examples, no /staging, etc.)'

        - name: 'Package publish readiness'
          command: 'bun run pre-publish -- --skip-git-checks'
          description: 'Validates packages are ready for publishing (metadata, files, workspace deps, etc.)'

        - name: 'Documentation validation'
          command: 'bun run vat resources validate'
          description: 'Validates markdown link integrity across entire project'

        - name: 'Code duplication check'
          command: 'bun run duplication-check'

        - name: 'Skills validation'
          command: 'bun run vat skills validate'
          description: 'Validates all SKILL.md files (unified: resources + skill-specific rules)'

        - name: 'Unit tests with coverage'
          command: 'bun run test:coverage'

    - name: 'Integration Tests'
      parallel: false
      steps:
        - name: 'Integration tests'
          command: 'bun run test:integration'

    - name: 'System Tests'
      parallel: false
      steps:
        - name: 'End-to-end system tests'
          command: 'bun run test:system'
          description: 'Runs complete end-to-end workflows testing the entire system'
